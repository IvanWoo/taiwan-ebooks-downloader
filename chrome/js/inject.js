parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"FOZT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onSearchPage=exports.onBookReaderPage=exports.onBookPage=void 0;const e=async e=>{const t=await fetch(e);return await t.text()},t=e=>{const t=e.split("/")[5];return`http://taiwanebook.ncl.edu.tw/ebkFiles/${t}/${t}.PDF`},o=async o=>{const n=o+"/reader",a=await e(n);let r=[...(new DOMParser).parseFromString(a,"text/html").querySelectorAll("a.pdfFile")].map(e=>e.href).map(e=>{const t=new URL(e);return t.origin+t.searchParams.get("file")});return 0===r.length&&(r=[t(o)]),r},n=e=>{return"en"===e.split("/")[3]?"Download eBook":"下載電子書"},a=(e,t)=>{let o=document.createElement("A");return o.target="_blank",o.href=e,o.textContent=`${t} ${e.split("/").slice(-1)}`,o},r=async e=>{const t=n(e),r=await o(e);for(const o of r){const e=document.createElement("I"),n=a(o,t);n.appendChild(e),e.classList.add("right","chevron","icon"),n.classList.add("ui","cetered","blue","button","focus_border"),document.querySelector("div.ui.medium.image").appendChild(n)}};exports.onBookPage=r;const c=async e=>{const t=n(e),r=await o(e);for(const o of r){const e=document.createElement("I"),n=a(o,t);n.appendChild(e),e.classList.add("right","arrow","icon"),n.classList.add("ui","labeled","icon","button","focus_border"),document.querySelector("body > main > main > div > div:nth-child(1) > div.ui.three.wide.computer.three.wide.tablet.sixteen.wide.mobile.column").appendChild(n)}};exports.onBookReaderPage=c;const s=async()=>{for(const e of document.querySelectorAll("div.extra > a.ui.right.floated")){const t=e.href,r=await o(t),c=n(t);for(const o of r){const t=document.createElement("I");t.classList.add("right","chevron","icon");const n=a(o,c);n.classList.add("ui","right","floated"),n.appendChild(t),e.parentNode.appendChild(n)}}};exports.onSearchPage=s;
},{}],"k6es":[function(require,module,exports) {
"use strict";var t=require("./utils");const o=async()=>{const o=window.location.toString();"book"===o.split("/")[4]?6===o.split("/").length?await(0,t.onBookPage)(o):7===o.split("/").length&&await(0,t.onBookReaderPage)(o.split("/").slice(0,-1).join("/")):await(0,t.onSearchPage)()};o();
},{"./utils":"FOZT"}]},{},["k6es"], null)